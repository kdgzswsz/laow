<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ç‰¢w Â· é©¬å¹´å›½æ½®ä¸»é¡µ</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Microsoft YaHei",system-ui;-webkit-user-select:none;user-select:none}

body{
  min-height:100vh;
  background:#0b0000; /* å…œåº•é˜²ç™½è¾¹ */
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  overflow:hidden;
}

/* é˜²æ­¢æŠ–åŠ¨éœ²ç™½çš„èƒŒæ™¯å±‚ */
body::before{
  content:"";
  position:fixed;
  left:-80px;right:-80px;top:-80px;bottom:-80px;
  background:radial-gradient(circle at center,#2a0000,#0b0000);
  z-index:-1;
}

canvas{position:fixed;inset:0;pointer-events:none;z-index:0}

/* ğŸ å¥”é©¬ */
.horse{
  pointer-events:none;
  -webkit-user-drag:none;
  user-drag:none;
  position:fixed;
  bottom:18%;
  left:-50%;
  width:420px;
  opacity:.6;
  filter:drop-shadow(0 0 35px rgba(255,215,102,.9));
  animation:run 14s linear infinite;
  z-index:1;
}

@keyframes run{
  0%{transform:translateX(0) scaleX(1)}
  48%{transform:translateX(140vw) scaleX(1)}
  50%{transform:translateX(140vw) scaleX(-1)}
  98%{transform:translateX(0) scaleX(-1)}
  100%{transform:translateX(0) scaleX(1)}
}

/* ä¸»å¡ç‰‡ */
.card{
  position:relative;
  z-index:2;
  width:92%;
  max-width:520px;
  padding:36px 26px 40px;
  border-radius:28px;
  background:rgba(255,255,255,.14);
  box-shadow:0 30px 80px rgba(0,0,0,.6);
  border:1px solid rgba(255,255,255,.35);
  text-align:center;
  will-change:transform;
}

.badge{
  display:inline-block;
  padding:8px 20px;
  border-radius:999px;
  background:linear-gradient(90deg,#ffd666,#ffb700);
  color:#4a1a00;
  font-size:13px;
  letter-spacing:2px;
  font-weight:800;
}

h1{margin:10px 0 6px;font-size:clamp(26px,7vw,38px)}
.sub{opacity:.85;font-size:14px}

.year{
  margin:18px 0;
  font-size:clamp(40px,12vw,60px);
  font-weight:900;
  color:#ffd666;
  text-shadow:0 0 20px rgba(255,214,102,.8),0 0 45px rgba(255,214,102,.4);
}

.countdown{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}

.box{
  padding:16px 8px;
  border-radius:16px;
  background:linear-gradient(180deg,rgba(0,0,0,.5),rgba(0,0,0,.25));
  border:1px solid rgba(255,215,102,.25);
}

.box span{font-size:26px;font-weight:800;color:#ffd666}
.box p{font-size:12px;opacity:.85}
.message{margin-top:18px;font-size:16px}
.footer{margin-top:22px;font-size:12px;opacity:.65}

@keyframes shake-bg{
  0%{transform:translate(0)}
  20%{transform:translate(-3px,2px)}
  40%{transform:translate(3px,-2px)}
  60%{transform:translate(-2px,2px)}
  80%{transform:translate(2px,-2px)}
  100%{transform:translate(0)}
}

@keyframes shake-horse{
  0%{transform:translateX(0)}
  30%{transform:translateX(8px)}
  60%{transform:translateX(-8px)}
  100%{transform:translateX(0)}
}

@keyframes shake-card{
  0%{transform:translate(0)}
  20%{transform:translate(-6px,4px)}
  40%{transform:translate(6px,-4px)}
  60%{transform:translate(-5px,3px)}
  80%{transform:translate(5px,-3px)}
  100%{transform:translate(0)}
}

body.shake::before{animation:shake-bg .35s ease}
body.shake .horse{animation:shake-horse .35s ease}
body.shake .card{animation:shake-card .35s ease}
</style>
</head>
<body>
<canvas id="fx"></canvas>

<img class="horse" src="data:image/svg+xml;utf8,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 400'>
<path d='M60 260 C160 120 300 80 420 140 C520 180 600 130 700 160'
fill='none' stroke='%23ffd666' stroke-width='22' stroke-linecap='round'/>
<circle cx='560' cy='150' r='14' fill='%23ffd666'/>
<path d='M200 260 L160 340 M320 260 L300 350 M420 260 L430 350 M520 260 L560 350'
stroke='%23ffd666' stroke-width='16' stroke-linecap='round'/>
</svg>">

<div class="card">
  <div class="badge">ğŸ é©¬å¹´ Â· å›½æ½®ä¸»é¡µ</div>
  <h1>ç‰¢w çš„ä¸»é¡µ</h1>
  <div class="sub">Horse Year Â· Chinese Style</div>
  <div class="year" id="year"></div>
  <div class="countdown">
    <div class="box"><span id="d">00</span><p>å¤©</p></div>
    <div class="box"><span id="h">00</span><p>æ—¶</p></div>
    <div class="box"><span id="m">00</span><p>åˆ†</p></div>
    <div class="box"><span id="s">00</span><p>ç§’</p></div>
  </div>
  <div class="message" id="msg">é©¬è¸ç¥¥äº‘ï¼ŒåŠ¿ä¸å¯æŒ¡</div>
  <div class="footer">Â© ç‰¢w Â· é©¬å¹´ä¸»é¡µ</div>
</div>

<script>
const yearEl=document.getElementById('year');
const d=document.getElementById('d');
const h=document.getElementById('h');
const m=document.getElementById('m');
const s=document.getElementById('s');
const msg=document.getElementById('msg');
const fx=document.getElementById('fx');

const y=new Date().getFullYear()+1;
yearEl.innerText=`è¿æ¥ ${y} Â· é©¬å¹´`;
const target=new Date(`${y}-01-01T00:00:00`).getTime();

setInterval(()=>{
  const diff=target-Date.now();
  if(diff<=0){
    msg.innerText="ğŸ‰ é©¬å¹´åˆ°ï¼é©¬åˆ°æˆåŠŸï¼";
    fireworks();
    return;
  }
  d.innerText=String(diff/86400000|0).padStart(2,'0');
  h.innerText=String(diff/3600000%24|0).padStart(2,'0');
  m.innerText=String(diff/60000%60|0).padStart(2,'0');
  s.innerText=String(diff/1000%60|0).padStart(2,'0');
},1000);

const c=fx;
const ctx=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight}
resize();addEventListener('resize',resize);

let ps=[];
let paused=false;

function fireworks(x0,y0){
  if(paused) return;
  const count=120;
  for(let i=0;i<count;i++){
    const speed=Math.random()*2+0.5;
    ps.push({
      x:x0 ?? Math.random()*c.width,
      y:y0 ?? Math.random()*c.height*0.6,
      a:Math.random()*Math.PI*2,
      s:0,
      targetS:speed,
      l:150,
      alpha:0
    });
  }
}

setInterval(()=>fireworks(),2200);

document.addEventListener('visibilitychange',()=>{
  paused=document.hidden;
  if(paused) ps.length=0;
});

addEventListener('pointerdown',e=>{
  fireworks(e.clientX,e.clientY);
  document.body.classList.add('shake');
  setTimeout(()=>document.body.classList.remove('shake'),300);
  if(navigator.vibrate) navigator.vibrate([20,30,20]);
});

(function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  ps=ps.filter(p=>p.l>0);
  ps.forEach(p=>{
    p.s+=(p.targetS-p.s)*0.08;
    p.x+=Math.cos(p.a)*p.s;
    p.y+=Math.sin(p.a)*p.s;
    p.l--;
    p.alpha=Math.min(1,p.alpha+0.04)*Math.max(p.l/150,0);
    ctx.fillStyle=`rgba(255,214,102,${p.alpha})`;
    ctx.fillRect(p.x,p.y,2.4,2.4);
  });
  requestAnimationFrame(draw);
})();
</script>
</body>
</html>
